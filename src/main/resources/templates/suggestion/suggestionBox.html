<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org"
      xmlns:layout="www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<!--<head>-->
<meta charset="UTF-8">
<title>Title</title>
<th:block layout:fragment="css"></th:block>
<th:block layout:fragment="script"></th:block>
<body>
<div layout:fragment="content" class="content">
  <h2 class="com-title">건의함</h2>
  <form id="form" th:action="@{/suggestion/new}">
    <table class="table">
      <thead>
      <tr>
        <th scope="col">글번호</th>
        <th scope="col">제목</th>
        <th scope="col">작성자</th>
        <th scope="col">작성일</th>
      </tr>
      </thead>
      <tbody>
      <div>
        <tr th:each="suggestion : ${suggestions}" th:object="${suggestion}">
          <th th:text="*{suggestionId}"></th>
          <td>
            <a th:href="@{/suggestion/{id}(id=*{suggestionId})}" th:if="*{openType}==1" th:text="*{suggestionTitle}"></a>
            <span th:unless="*{openType}==1" th:text="'작성자와 관리자만 확인 가능한 글입니다.'"></span>
          </td>

<!--          <td th:if="*{suggestionTitle} != null">-->
<!--            <span th:if="*{openType}==1" th:text="*{suggestionTitle}"></span>-->
<!--            <span th:unless="*{openType}==1" th:text="'작성자와 관리자만 확인 가능한 글입니다.'"></span>-->
<!--          </td>-->
<!--          <td>개구리</td>-->
          <td th:if="${suggestion.users != null}">
            <span th:if="*{openType}==1" th:text="*{users.userNickname}"></span>
            <span th:unless="*{openType}==1" th:text="익명"></span>

            <!-- 관리자일 경우 -->
<!--            <span th:if="${suggestion.users.userNickname == 'froggy'}" th:text="${suggestion.users.userNickname}"></span>-->
<!--            <span th:unless="${suggestion.users.userNickname == 'froggy'}" th:text="익명"></span>-->

            <!-- 작성자일 경우 (로그인한 사용자가 작성자와 동일한 경우) -->
<!--            <span th:if="${suggestion.users.userNickname == 'antty'}" th:text="${suggestion.users.userNickname}"></span>-->

            <!-- 일반 사용자일 경우 -->
<!--            <span th:if="${suggestion.users == 'user'}" th:text="${suggestion.users.userNickname}"></span>-->
          </td>
<!--          <td th:if="${suggestion.users} == 'froggy'" th:text="${suggestion.users}"></td>-->
<!--          <td th:if="${suggestion.users} == 'antty'" th:text="${suggestion.users}"></td>-->
<!--          <td th:text="${suggestion.users != null ? suggestion.users.userNickname : '익명'}"></td>-->
          <td th:text="*{insertedDate != null ? #temporals.format(insertedDate, 'yyyy-MM-dd HH:mm:ss') : ''}"></td>
        </tr>

      </div>
      </tbody>
    </table>
    <input type="submit" value="글쓰기" id="newSuggestion">
    <button id="GoBackToMain"><a href="/main">메인</a></button>
    <br>

  </form>
</div>

</body>
</html>